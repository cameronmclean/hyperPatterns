
<!DOCTYPE html>

    <html>
    <meta charset="utf-8">
    <head>
    <!-- jquery -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
     
    <!-- bootstrap -->
    <link type="text/css" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
    <script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
     
    <!-- handlebars -->
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
     
    <!-- alpaca -->
    <link type="text/css" href="http://code.cloudcms.com/alpaca/1.5.8/bootstrap/alpaca.min.css" rel="stylesheet" />
    <script type="text/javascript" src="http://code.cloudcms.com/alpaca/1.5.8/bootstrap/alpaca.min.js"></script>
     
    </head>
    <body>
    <div id="form"></div>
    <button>Submit</button>
    <script type="text/javascript">
        $(document).ready(function() {
            $.support.cors = true;
            $("#form").alpaca(
{
"options":{

    "form":{
        "attributes": {
            "action": "http://httpbin.org/post",
            "method": "POST",
            "enctype": "multipart/form-data",
            "id": "pd"
        },
        "buttons": {
            "submit": { }

            //    "click": function(files, data) {
       // var fd = new FormData();
       // fd.append('file', files[0]);

        //console.log(fd);

        //var forms = this.getValue();

        //console.log(forms);

        //$.ajax({
          //  url: 'http://127.0.0.1:3000/new',
           // data: fd,
           // processData: false,
            //contentType: false,
            //type: 'POST',
            //success: function(data){
              //  alert(data);
           // }
    //    });
   // }



                //function(){
                    //var data = $('#pd').serializeArray();
                    //console.log(data);
                    //for (var x in data) { 
                    //console.log(data[x]);
                 //   var data = this.getValue();
                  //  console.log(data);

               //   var ajaxData = new FormData();

                 //   jQuery.each($('#pic')[0].files, function(i, file) {
                  //  ajaxData.append('file-'+i, file);
                   // });

                   // console.log(Object.keys(ajaxData));



                //    var data2 = new FormData($('#alpaca5')[0]);
                   // var test = $('input[type=file]')[0].files;
                //    var form = document.getElementById('#pd');
                    

                    //for (var x in test){
                    //console.log(test[x]);
                   // }

                    //var data = new FormData();
                    //data.append
                    //console.log(data);
                    //var files = new FormData(document.getElementById('#pd'));
                    //console.log(test);
                    //console.log(files);
                    //var data2 = new FormData();
                    //data2.append(files, files.files[0]);
                    //console.log(data2);


                  //  var formData = new FormData($('input[type=file]')[0]);
               //     formData.append('file', $('input[type=file]')[0].files[0]);
                 //   console.log(formData);

                  //  var formFiles = new FormData();
                    // get a list of all input type='file'
                    //store name and "input" in array.
                    //append as files: to data
                    //then wrangle in node.js
                //    $('#pd')function(){
                //        var formdata = new FormData($(this)[0]);
               //         console.log(formdata);
                        // do somthing here to get file and name for each DOM form element.
                 //   });

                    //console.log(listoffiles);
       }     
        
    },
    "fields": {
        "pic": {
            "type": "file",
            "id": "pic",
            "label": "Pictogram",
            "helper": "Upload a pictogram to represent this pattern."
        },
        "context": {
            "type": "textarea",
            "placeholder": "Describe the context for this pattern. What is the situation in which this pattern occurs?",
            "rows": 6
        },
        "problem": {
            "type": "textarea",
            "placeholder": "A concise description of the problem this pattern addresses. Define the problem as a conflict of 'forces' that dominate the situation.",
            "rows": 3
        },
        "forces": {
            "fields": {
                "item": {
                    "fields": {
                        "definition": {
                            "placeholder": "Describe this force as clearly and precisely as possible",
                            "rows": 2
                        },
                        "pic": {
                            "type": "file",
                            "label": "Pictogram",
                            "helper": "Upload a pictogram to represent this force."
                        }
                    }
                }
            }
        },
        "solution":{
            "type": "textarea",
            "placeholder": "Describe concisely how to balance the forces that create the problem.",
            "rows": 3
        },
        "rationale": {
            "type": "textarea",
            "placeholder": "Elaborate on the reasoning behind how the solution balances the 'forces'. Note theoretical or empirical support.",
            "rows": 6
        },
        "diagram": {
            "type": "file",
            "label": "Diagram",
            "helper": "Upload a diagram that summarises the forces and their interactions involved in this pattern."
        },
        "ref": {
            "fields": {
                "item": {
                    "fields": {
                        "reference": {
                            "type": "textarea",
                            "placeholder": "Insert a reference in bibTeX format",
                            "rows": 6
                        }
                    }
                }
            }
        }
    }   
 },
"schema": {
    "title": "Enter a new Design Pattern",
    "description": "New Pattern Form",
    "type": "object",
    "properties": {
        "name": {
            "title": "Name",
            "description": "Enter the name of this pattern.",
            "type": "string",
            "required": true
        },
        "author": {
            "title": "Authors",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Name",
                        "type": "string"
                    },
                    "orcid": {
                        "title": "ORCID",
                        "type": "string"
                    }
                }
            }
        },
        "pic": {
            "type": "string",
            "format": "uri"

        },
        "context": {
            "type": "textarea",
            "format": "string",
            "title": "Context"
        },
        "problem": {
            "type": "textarea",
            "format": "string",
            "title": "Problem",
        },
        "forces": {
            "title": "Forces",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Name",
                        "type": "string"
                    },
                    "definition": {
                        "title": "Definition",
                        "type": "string"
                    },
                    "pic": {
                        "type": "string",
                        "type": "uri"
                    }
                }   
            }
        },
        "solution": {
            "type": "string",
            "title": "Solution"
        },
        "rationale": {
            "type": "string",
            "title": "Support and rationale"
        },
        "diagram": {
            "type": "string",
            "format": "uri"
        },
        "ref": {
            "type": "array",
            "title": "Evidence",
            "items": {
                "type": "object",
                "properties": {
                    "reference": {
                        "title": "Reference",
                        "type": "string"
                    }
                }
            }
        }
   }    
 }
}


            );
        });

</script>




    </body>
    </html>

